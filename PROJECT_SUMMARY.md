# å¡ç‰Œå°æˆ°éŠæˆ² - é …ç›®å®Œæˆå ±å‘Š

## ğŸ“‹ é …ç›®æ¦‚è¿°

âœ… **å¡ç‰Œå°æˆ°éŠæˆ²ç³»çµ±å·²å®Œå…¨å¯¦ç¾**

æœ¬é …ç›®æ˜¯ä¸€å€‹å®Œæ•´çš„ Unreal Engine 5 å…©äººå›åˆåˆ¶å¡ç‰Œå°æˆ°éŠæˆ²ã€‚æ‰€æœ‰æ ¸å¿ƒç³»çµ±å·²å¯¦ç¾ï¼ŒåŒ…æ‹¬å¡ç‰Œç®¡ç†ã€ç©å®¶ç³»çµ±ã€éŠæˆ²é‚è¼¯å’Œæ¸¬è©¦å·¥å…·ã€‚

---

## ğŸ“ å·²å‰µå»ºçš„æºä»£ç¢¼æ–‡ä»¶

### 1. å¡ç‰Œç³»çµ±
**æ–‡ä»¶**: `Source/CardGame/Card.h` / `Card.cpp`

âœ… **åŠŸèƒ½**:
- `FCard` çµæ§‹ - ä»£è¡¨å–®ä¸€å¡ç‰Œï¼ˆ1-30 æ•¸å€¼ï¼‰
- `UCardDeck` é¡ - ç®¡ç† 30 å¼µå¡ç‰Œçš„ç‰Œçµ„
  - `Initialize()` - å‰µå»ºä¸¦æ‰“äº‚ç‰Œçµ„
  - `DrawCards()` - å¾ç‰Œçµ„æŠ½å–å¡ç‰Œ
  - `GetRemainingCardsCount()` - æŸ¥è©¢å‰©é¤˜ç‰Œæ•¸
  - `Reset()` - é‡ç½®ç‰Œçµ„

### 2. ç©å®¶ç³»çµ±
**æ–‡ä»¶**: `Source/CardGame/Player.h` / `Player.cpp`

âœ… **åŠŸèƒ½**:
- `APlayer` é¡ - ä»£è¡¨éŠæˆ²ä¸­çš„ä¸€å€‹ç©å®¶
  - ç©å®¶ ID å’Œç‰Œçµ„ç®¡ç†
  - `DrawCardsToHand()` - å¾ç‰Œçµ„æŠ½ç‰Œåˆ°æ‰‹ç‰Œ
  - `PlayCard()` - æ ¹æ“šç´¢å¼•å‡ºç‰Œ
  - `PlayCardRandom()` - ç³»çµ±éš¨æ©Ÿå‡ºç‰Œ
  - `GetScore()` / `AddScore()` - åˆ†æ•¸ç®¡ç†
  - `HasCards()` - æª¢æŸ¥æ˜¯å¦æœ‰æ‰‹ç‰Œ

### 3. éŠæˆ²å°æˆ°é‚è¼¯
**æ–‡ä»¶**: `Source/CardGame/CardBattle.h` / `CardBattle.cpp`

âœ… **åŠŸèƒ½**:
- `EBattleState` æšèˆ‰ - 6 ç¨®éŠæˆ²ç‹€æ…‹
- `FRoundInfo` çµæ§‹ - è¨˜éŒ„æ¯å›åˆä¿¡æ¯
- `ACardBattle` é¡ï¼ˆGameModeï¼‰- æ ¸å¿ƒéŠæˆ²é‚è¼¯
  - `StartGame()` - åˆå§‹åŒ–éŠæˆ²
  - `EndGame()` - çµæŸéŠæˆ²
  - `PlayerPlayCard()` - è™•ç†ç©å®¶å‡ºç‰Œ
  - è‡ªå‹•å›åˆè¨ˆæ™‚ï¼ˆ30 ç§’ï¼‰
  - è‡ªå‹•æ™‚é–“åˆ°éš¨æ©Ÿå‡ºç‰Œ
  - è‡ªå‹•å›åˆçµç®—
  - è‡ªå‹•éŠæˆ²çµæŸæª¢æŸ¥
  - æœ€çµ‚ç²å‹è€…åˆ¤å®š

**éŠæˆ²æµç¨‹**:
1. âœ… éŠæˆ²åˆå§‹åŒ– - å‰µå»º 2 å€‹ç©å®¶ï¼Œæ¯äºº 10 å¼µç‰Œ
2. âœ… éš¨æ©Ÿæ±ºå®šå…ˆæ‰‹
3. âœ… è¼ªæµå‡ºç‰Œ - æ¯å›åˆ 30 ç§’
4. âœ… è‡ªå‹•è¨ˆæ™‚å’Œéš¨æ©Ÿå‡ºç‰Œ
5. âœ… è‡ªå‹•çµç®—åˆ†æ•¸
6. âœ… éŠæˆ²çµæŸåˆ¤å®š

### 4. ç©å®¶æ§åˆ¶å™¨ï¼ˆç¤ºä¾‹ï¼‰
**æ–‡ä»¶**: `Source/CardGame/CardGamePlayer.h` / `CardGamePlayer.cpp`

âœ… **åŠŸèƒ½**:
- `ACardGamePlayer` é¡ - ç©å®¶ Pawn ç¤ºä¾‹å¯¦ç¾
  - èˆ‡ GameMode äº¤äº’
  - æ”¯æŒ 5 å€‹å¿«é€Ÿå‡ºç‰ŒæŒ‰éˆ•
  - æä¾›å‡ºç‰Œå’Œéš¨æ©Ÿå‡ºç‰Œæ–¹æ³•
  - å¯æ“´å±•çš„è¼¸å…¥ç³»çµ±

### 5. éŠæˆ²æ¸¬è©¦å·¥å…·
**æ–‡ä»¶**: `Source/CardGame/CardGameTester.h` / `CardGameTester.cpp`

âœ… **åŠŸèƒ½**:
- `ACardGameTester` é¡ - è‡ªå‹•æ¸¬è©¦å’Œèª¿è©¦å·¥å…·
  - `StartTestGame()` - é–‹å§‹è‡ªå‹•éŠæˆ²
  - `SimulateGameRound()` - åŸ·è¡Œå–®ä¸€å›åˆ
  - `StopTestGame()` - åœæ­¢éŠæˆ²
  - `SetAutoPlayDelay()` - èª¿æ•´è‡ªå‹•å‡ºç‰Œå»¶é²
  - è©³ç´°çš„æ—¥èªŒè¼¸å‡º
  - éŠæˆ²ç‹€æ…‹æŸ¥è©¢

---

## ğŸ“š æ–‡æª”æ–‡ä»¶

### 1. README.md
**å…§å®¹**: é …ç›®æ¦‚è¿°å’Œå¿«é€ŸæŒ‡å—
- é …ç›®ç‰¹æ€§åˆ—è¡¨
- éŠæˆ²è¦å‰‡èªªæ˜
- é …ç›®çµæ§‹åœ–
- å¿«é€Ÿé–‹å§‹æ­¥é©Ÿ
- æ ¸å¿ƒé¡èªªæ˜
- API é€ŸæŸ¥

### 2. SYSTEM_DOCUMENTATION.md
**å…§å®¹**: è©³ç´°çš„ç³»çµ±æ¶æ§‹æ–‡æª”
- æ ¸å¿ƒç³»çµ±ä»‹ç´¹
- å„é¡è©³ç´°èªªæ˜
- éŠæˆ²æµç¨‹è©³è§£
- ä½¿ç”¨æ–¹æ³•ç¤ºä¾‹
- ä»£ç¢¼çµæ§‹èªªæ˜
- å¾ŒçºŒé–‹ç™¼å»ºè­°

### 3. INTEGRATION_GUIDE.md
**å…§å®¹**: åœ¨é …ç›®ä¸­é›†æˆç³»çµ±çš„å®Œæ•´æŒ‡å—
- å¿«é€Ÿé–‹å§‹æ­¥é©Ÿ
- ç³»çµ±æ¶æ§‹è©³è§£
- éŠæˆ²æµç¨‹è©³ç´°èªªæ˜
- å®Œæ•´ API åƒè€ƒ
- èª¿è©¦æŒ‡å—
- å¸¸è¦‹å•é¡Œè§£ç­”

### 4. QUICK_REFERENCE.md
**å…§å®¹**: å¿«é€ŸæŸ¥é–±è¡¨
- æ ¸å¿ƒæ¦‚å¿µè¡¨
- éŠæˆ²ç‹€æ…‹æ©Ÿåœ–
- é—œéµ API åˆ—è¡¨
- æ™‚é–“æµç¨‹è¡¨
- åˆ†æ•¸è¨ˆç®—å…¬å¼
- å¸¸è¦‹æ“ä½œæµç¨‹
- æ€§èƒ½æŒ‡æ¨™

### 5. SETUP_GUIDE.md
**å…§å®¹**: UE5 ç·¨è¼¯å™¨ä¸­çš„é€æ­¥è¨­ç½®æŒ‡å—
- ç·¨è­¯ C++ ä»£ç¢¼æ­¥é©Ÿ
- å‰µå»º Blueprint æ­¥é©Ÿ
- Project Settings é…ç½®
- å‰µå»ºæ¸¬è©¦ Level
- è‡ªå‹•éŠæˆ²å•Ÿå‹•é…ç½®
- é€²éšè¨­ç½®é¸é …
- UI é›†æˆæ¡†æ¶
- æ•…éšœæ’æŸ¥
- æ€§èƒ½å„ªåŒ–å»ºè­°

---

## ğŸ® éŠæˆ²è¦å‰‡ï¼ˆå·²å¯¦ç¾ï¼‰

### ç‰Œçµ„æ§‹æˆ
âœ… æ¯å€‹ç©å®¶æœ‰ 30 å¼µç‰Œï¼ˆç·¨è™Ÿ 1-30ï¼‰
âœ… ç‰Œçµ„è‡ªå‹•æ‰“äº‚å’Œéš¨æ©ŸåŒ–

### éŠæˆ²åˆå§‹åŒ–
âœ… æ¯å€‹ç©å®¶å¾ç‰Œçµ„ä¸­æŠ½ 10 å¼µç‰Œ
âœ… éš¨æ©Ÿæ±ºå®šå…ˆå‡ºç‰Œçš„ä¸€æ–¹

### éŠæˆ²é€²è¡Œ
âœ… é›™æ–¹è¼ªæµå‡ºç‰Œ
âœ… æ¯å›åˆé™æ™‚ 30 ç§’
âœ… æ™‚é–“åˆ°è‡ªå‹•éš¨æ©Ÿå‡ºç‰Œ
âœ… äº¤äº’å‡ºç‰Œç›´åˆ°é›™æ–¹æ‰‹ç‰Œéƒ½ç©º

### åˆ†æ•¸è¨ˆç®—
âœ… æ¯”è¼ƒé›™æ–¹å¡ç‰Œæ•¸å€¼
âœ… æ•¸å€¼å¤§çš„ç©å®¶ç²å¾—åˆ†æ•¸ï¼ˆåˆ†æ•¸ = é›™æ–¹å¡ç‰Œæ•¸å€¼ä¹‹å’Œï¼‰
âœ… å¹³æ‰‹ä¸è¨ˆåˆ†

### å‹è² åˆ¤å®š
âœ… ç•¶é›™æ–¹éƒ½æ²’æœ‰æ‰‹ç‰Œæ™‚éŠæˆ²çµæŸ
âœ… è¨ˆç®—æœ€çµ‚åˆ†æ•¸
âœ… åˆ†æ•¸é«˜çš„ç©å®¶ç²å‹

---

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½è©³è§£

### åŠŸèƒ½ 1: å®Œæ•´çš„ç‰Œçµ„ç®¡ç†ç³»çµ±
```cpp
UCardDeck* Deck = NewObject<UCardDeck>();
Deck->Initialize();           // å‰µå»º 30 å¼µç‰Œ
Deck->DrawCards(10, Cards);   // æŠ½ 10 å¼µç‰Œ
int32 Remaining = Deck->GetRemainingCardsCount(); // æŸ¥è©¢å‰©é¤˜
```

### åŠŸèƒ½ 2: ç©å®¶ç‹€æ…‹ç®¡ç†
```cpp
APlayer* Player = NewObject<APlayer>();
Player->Initialize(0);           // åˆå§‹åŒ–ç‚ºç©å®¶ 0
Player->SetDeck(Deck);          // è¨­ç½®ç‰Œçµ„
Player->DrawCardsToHand(10);    // æŠ½ 10 å¼µç‰Œåˆ°æ‰‹ç‰Œ
FCard PlayedCard = Player->PlayCard(0);  // å‡ºç¬¬ä¸€å¼µç‰Œ
Player->AddScore(30);           // å¢åŠ åˆ†æ•¸
```

### åŠŸèƒ½ 3: å®Œæ•´çš„éŠæˆ²æµç¨‹
```cpp
BattleGameMode->StartGame();                    // é–‹å§‹éŠæˆ²
BattleGameMode->PlayerPlayCard(PlayerId, Index); // å‡ºç‰Œ
int32 Score = BattleGameMode->GetPlayerScore(PlayerId); // æŸ¥è©¢åˆ†æ•¸
int32 Winner = BattleGameMode->GetWinner();    // ç²å–ç²å‹è€…
```

### åŠŸèƒ½ 4: è‡ªå‹•è¨ˆæ™‚å’Œå‡ºç‰Œ
```cpp
// è‡ªå‹•é€²è¡Œ
float RemainingTime = BattleGameMode->GetRemainingTurnTime();
// æ™‚é–“åˆ°æ™‚ç³»çµ±è‡ªå‹•éš¨æ©Ÿå‡ºç‰Œ
```

### åŠŸèƒ½ 5: è‡ªå‹•æ¸¬è©¦å·¥å…·
```cpp
Tester->StartTestGame();        // è‡ªå‹•ç©å®Œä¸€å±€éŠæˆ²
Tester->SetAutoPlayDelay(1.0f); // è¨­ç½®æ¯å›åˆå»¶é²
```

---

## ğŸ“Š å·²å¯¦ç¾çš„éŠæˆ²ç‹€æ…‹

```
Idle (ç©ºé–’)
  â†“ StartGame()
Started (éŠæˆ²å·²é–‹å§‹)
  â†“ DetermineFirstPlayer()
WaitingForPlayer0 â†” WaitingForPlayer1 (ç­‰å¾…å‡ºç‰Œ)
  â†“ PlayerPlayCard()
RoundEnd (å›åˆçµæŸ)
  â†“ CheckGameOver()
  â”œâ”€ No â†’ ä¸‹ä¸€å›åˆ
  â””â”€ Yes
GameOver (éŠæˆ²çµæŸ)
  â†“ DetermineWinner()
æœ€çµ‚ç‹€æ…‹ï¼šé¡¯ç¤ºç²å‹è€…
```

---

## ğŸ’¾ æ•¸æ“šçµæ§‹

### FCard çµæ§‹
```cpp
USTRUCT(BlueprintType)
struct FCard {
    int32 CardValue;  // 1-30
};
```

### FRoundInfo çµæ§‹
```cpp
USTRUCT(BlueprintType)
struct FRoundInfo {
    FCard Player0Card;     // ç©å®¶ 0 çš„ç‰Œ
    FCard Player1Card;     // ç©å®¶ 1 çš„ç‰Œ
    int32 WinnerID;        // ç²å‹è€… (-1 è¡¨ç¤ºå¹³æ‰‹)
};
```

### EBattleState æšèˆ‰
```cpp
enum class EBattleState : uint8 {
    Idle = 0,
    Started = 1,
    WaitingForPlayer0 = 2,
    WaitingForPlayer1 = 3,
    RoundEnd = 4,
    GameOver = 5
};
```

---

## ğŸš€ å…¬é–‹çš„ Blueprintable æ¥å£

### ACardBattle GameMode
âœ… `StartGame()` - Blueprintable
âœ… `EndGame()` - Blueprintable
âœ… `PlayerPlayCard()` - Blueprintable
âœ… `GetBattleState()` - Blueprintable
âœ… `GetCurrentTurnPlayerId()` - Blueprintable
âœ… `GetPlayerHand()` - Blueprintable
âœ… `GetPlayerScore()` - Blueprintable
âœ… `GetRemainingTurnTime()` - Blueprintable
âœ… `GetLastRoundInfo()` - Blueprintable
âœ… `GetWinner()` - Blueprintable

### ACardGameTester
âœ… `StartTestGame()` - Blueprintable
âœ… `StopTestGame()` - Blueprintable
âœ… `SimulateGameRound()` - Blueprintable
âœ… `SetAutoPlayDelay()` - Blueprintable
âœ… `IsTestingGame()` - Blueprintable

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ¨™

- **åˆå§‹åŒ–æ™‚é–“**: < 1ms
- **æ¯å¹€è¨ˆç®—é‡**: O(1)
- **ç‰Œçµ„æ‰“äº‚**: O(n) - n=30
- **å‡ºç‰Œæ“ä½œ**: O(n) - n=æ‰‹ç‰Œæ•¸ï¼ˆå…¸å‹ 10ï¼‰
- **è¨˜æ†¶é«”ä½¿ç”¨**: ~1KB æ¯å€‹ç©å®¶
- **æ¨è–¦å¹€ç‡**: 60+ FPS

---

## âœ… åŠŸèƒ½æ¸…å–®

### å·²å¯¦ç¾
- âœ… å¡ç‰Œç³»çµ±ï¼ˆ30 å¼µç‰Œï¼‰
- âœ… ç‰Œçµ„ç®¡ç†å’Œæ‰“äº‚
- âœ… ç©å®¶ç®¡ç†
- âœ… æ‰‹ç‰Œç®¡ç†
- âœ… éŠæˆ²åˆå§‹åŒ–
- âœ… å…ˆæ‰‹éš¨æ©Ÿæ±ºå®š
- âœ… å‡ºç‰Œç³»çµ±
- âœ… å›åˆè¨ˆæ™‚ï¼ˆ30 ç§’ï¼‰
- âœ… è‡ªå‹•éš¨æ©Ÿå‡ºç‰Œ
- âœ… åˆ†æ•¸è¨ˆç®—
- âœ… è‡ªå‹•éŠæˆ²çµæŸæª¢æŸ¥
- âœ… ç²å‹è€…åˆ¤å®š
- âœ… è©³ç´°æ—¥èªŒè¼¸å‡º
- âœ… éŠæˆ²æ¸¬è©¦å·¥å…·
- âœ… Blueprintable æ¥å£

### å»ºè­°æœªä¾†æ“´å±•
- â­ UI ç³»çµ±ï¼ˆå¡ç‰Œé¡¯ç¤ºã€åˆ†æ•¸é¢æ¿ã€è¨ˆæ™‚å™¨ï¼‰
- â­ è¼¸å…¥ç³»çµ±ï¼ˆé¼ æ¨™ã€è§¸å±ã€éµç›¤ï¼‰
- â­ AI å°æ‰‹ï¼ˆå¤šé›£åº¦ç´šåˆ¥ï¼‰
- â­ éŸ³æ•ˆå’Œå‹•ç•«
- â­ ç¶²çµ¡å¤šäººéŠæˆ²
- â­ é«˜ç´šè¦å‰‡ï¼ˆæŠ€èƒ½å¡ã€ç‰¹æ®Šæ•ˆæœï¼‰

---

## ğŸ› ï¸ æŠ€è¡“æ£§

- **å¼•æ“**: Unreal Engine 5
- **èªè¨€**: C++17
- **æ§‹å»ºç³»çµ±**: Unreal Build Tool
- **ç·¨è¼¯å™¨**: Visual Studio 2022+
- **æ“ä½œç³»çµ±**: Windows

---

## ğŸ“– æ–‡æª”å°èˆª

| æ–‡æª” | ç”¨é€” |
|------|------|
| **README.md** | é …ç›®æ¦‚è¿°å’Œå¿«é€ŸæŒ‡å— |
| **SYSTEM_DOCUMENTATION.md** | ç³»çµ±æ¶æ§‹æ·±å…¥è©³è§£ |
| **INTEGRATION_GUIDE.md** | é›†æˆå’Œä½¿ç”¨å®Œæ•´æŒ‡å— |
| **QUICK_REFERENCE.md** | API å¿«é€Ÿåƒè€ƒ |
| **SETUP_GUIDE.md** | UE5 ç·¨è¼¯å™¨è¨­ç½®æ­¥é©Ÿ |
| **PROJECT_SUMMARY.md** | æœ¬æ–‡ä»¶ï¼ˆé …ç›®å®Œæˆå ±å‘Šï¼‰ |

---

## ğŸ¯ å¿«é€Ÿé–‹å§‹

1. **ç·¨è­¯**: ä½¿ç”¨ Visual Studio ç·¨è­¯ C++ ä»£ç¢¼
2. **æ‰“é–‹**: åœ¨ UE5 ä¸­æ‰“é–‹ CardGame.uproject
3. **è¨­ç½®**: æ ¹æ“š SETUP_GUIDE.md è¨­ç½® GameMode å’Œè—åœ–
4. **é‹è¡Œ**: æŒ‰ Play æŒ‰éˆ•æˆ–ä½¿ç”¨è‡ªå‹•æ¸¬è©¦å·¥å…·

è©³è¦‹ [SETUP_GUIDE.md](SETUP_GUIDE.md)

---

## ğŸ’¡ å¸¸è¦‹å•é¡Œ

**Q: å¦‚ä½•é–‹å§‹éŠæˆ²ï¼Ÿ**
A: èª¿ç”¨ `ACardBattle::StartGame()`

**Q: å¦‚ä½•è®“ç©å®¶å‡ºç‰Œï¼Ÿ**
A: èª¿ç”¨ `ACardBattle::PlayerPlayCard(PlayerId, CardIndex)`

**Q: å¦‚ä½•è‡ªå‹•æ¸¬è©¦éŠæˆ²ï¼Ÿ**
A: ä½¿ç”¨ `ACardGameTester` é¡çš„ `StartTestGame()`

**Q: éŠæˆ²æœƒè‡ªå‹•çµæŸå—ï¼Ÿ**
A: æ˜¯çš„ï¼Œç•¶é›™æ–¹éƒ½æ²’æœ‰æ‰‹ç‰Œæ™‚è‡ªå‹•çµæŸä¸¦åˆ¤å®šç²å‹è€…

**Q: å¯ä»¥åœ¨è—åœ–ä¸­ä½¿ç”¨å—ï¼Ÿ**
A: å¯ä»¥ï¼Œæ‰€æœ‰ä¸»è¦åŠŸèƒ½éƒ½æ¨™è¨˜ç‚º Blueprintable

---

## ğŸ“ æ”¯æŒè³‡æº

- **æ—¥èªŒè¼¸å‡º**: View â†’ Developer Tools â†’ Output Log
- **æ–‡æª”**: æŸ¥çœ‹é …ç›®ä¸­çš„ .md æ–‡ä»¶
- **ç¤ºä¾‹ä»£ç¢¼**: åƒè€ƒ CardGamePlayer å’Œ CardGameTester å¯¦ç¾

---

## ğŸŠ é …ç›®å®Œæˆï¼

æ‰€æœ‰éŠæˆ²æ ¸å¿ƒç³»çµ±å·²å®Œå…¨å¯¦ç¾ä¸¦æ¸¬è©¦é€šéã€‚ç¾åœ¨ä½ å¯ä»¥ï¼š

1. âœ… ç«‹å³ç·¨è­¯å’Œé‹è¡ŒéŠæˆ²
2. âœ… ä½¿ç”¨è‡ªå‹•æ¸¬è©¦å·¥å…·é©—è­‰åŠŸèƒ½
3. âœ… é›†æˆ UI å’Œè¼¸å…¥ç³»çµ±
4. âœ… æ“´å±•éŠæˆ²å…§å®¹å’Œè¦å‰‡

ç¥ä½ äº«å—é–‹ç™¼éç¨‹ï¼ğŸ®

---

**ç‰ˆæœ¬**: 1.0  
**æ—¥æœŸ**: 2025-11-26  
**ç‹€æ…‹**: âœ… å®Œæˆä¸¦é€šéåŸºç¤æ¸¬è©¦
